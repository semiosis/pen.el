#!/bin/bash
export TTY

( hs "$(basename "$0")" "$@" "#" "<==" "$(ps -o comm= $PPID)" 0</dev/null ) &>/dev/null

# echo 'I Thessalonians' | canonicalise-bible-book-title
# canonicalise-bible-book-title 'Rev'

# Sometimes, $1 is John. when scraping the following. Find the bug:
# cat /root/.pen/documents/notes/perspective.org | upd scrape-bible-references
if test -n "$1"; then
    name="$1"
    # Remove trailing . from John.
    name="${name//\./}"
    # echo "$1" 1>&2
    input_fp="$(printf -- "%s" "$name" | tf txt)"
else
    input_fp="$(cat | tf txt)"
fi

canonicalise-bible-book-title.els "$input_fp" 2>/dev/null
{
printf -- "%s" "$(cat "$input_fp")"
rm "$input_fp"
}
